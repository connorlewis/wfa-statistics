---
title: "WFAStats"
author: "Heather Lendway"
date: "7/17/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(jsonlite)
library(xml2)
library(rvest)
```

```{r url setup}
league <- "wfa"
season <- c("2017","2018")
tier <- "1"
tiers <- c("WFA+I","WFA+II","WFA+III")
weeks <- c("1","2","3","4","5","6","7","8","9","10")

# validate this page seems to give totals up to now, so better to pull weekly data and sum ourselves? - http://www.hostedstatistics.com/football/stats.asp?league=wfa&season=2018&tier=WFA+II

# eventually loop on all possibilities, i.e. 2017, all tiers and all weeks
stats_url <- paste0("http://www.hostedstatistics.com/football/stats.asp?league=wfa&season=",season[2],"&tiers=1&tier=",tiers[2],"&selected_week=",weeks[10])

```

```{r read page data}

stats_page_results <- read_html(stats_url)

```

```{r get each data table}

table_data <- stats_page_results %>%  
  html_nodes(".table.tbody.tr.td") 

week_scores <- stats_page_results %>%
  html_nodes(xpath="//html//body//table[3]//tr//td[2]//table[3]//tr//td") %>% 
  toString()
#/html/body/table[3]/tbody/tr/td[2]/table[3]/tbody/tr/td/table[2]/tbody
```


